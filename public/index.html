<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Coffee Shop is a cozy caramel proxy lounge that cloaks your browsing with comfort-first Safezone relays."
    />
    <meta name="theme-color" content="#3a2010" />
    <title>CoffeeShop Education</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="assets/logo.svg" type="image/svg+xml" />
  </head>
  <body class="auth-locked edu-front">
    <div class="auth-overlay is-hidden" id="auth-overlay" role="dialog" aria-modal="true" aria-labelledby="auth-title">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Coffee Shop Access</p>
        <h1 id="auth-title">Access required</h1>
        <p class="auth-card__lead">Enter the Coffee Shop access code to continue.</p>
        <form id="auth-form" autocomplete="off">
          <label for="auth-code" class="sr-only">Access code</label>
          <input
            id="auth-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter access code"
            required
          />
          <button type="submit">Enter workspace</button>
          <p id="auth-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="username-overlay" role="dialog" aria-modal="true">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Coffee Shop ID</p>
        <h1>Choose a username</h1>
        <p class="auth-card__lead">Pick a unique name so we can build your private workspace.</p>
        <form id="username-form" autocomplete="off">
          <label for="username-input" class="sr-only">Username</label>
          <input id="username-input" type="text" autocomplete="off" placeholder="Enter username" required />
          <button type="submit">Save username</button>
          <p id="username-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="bridge-overlay">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Coffee Shop dev</p>
        <h1>Identity check</h1>
        <p>Enter the stage-two developer code.</p>
        <form id="bridge-form" autocomplete="off">
          <label for="bridge-code" class="sr-only">Stage-two code</label>
          <input
            id="bridge-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter stage-two code"
            required
          />
          <button type="submit">Continue</button>
          <p id="bridge-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="dev-overlay">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Coffee Shop dev</p>
        <h1>Developer console</h1>
        <p>Enter the developer access code to continue.</p>
        <form id="dev-form" autocomplete="off">
          <label for="dev-code" class="sr-only">Developer access code</label>
          <input
            id="dev-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter developer code"
            required
          />
          <button type="submit">Enter dev workspace</button>
          <p id="dev-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div id="edu-shell" class="edu-shell" aria-live="polite">
      <header class="edu-nav">
        <div class="edu-nav__brand">
          <span class="edu-logo">CoffeeShop Education</span>
          <span class="edu-nav__tagline">World-class study decks, totally free.</span>
        </div>
        <nav class="edu-nav__links">
          <a href="#courses">Courses</a>
          <a href="#cohorts">Live cohorts</a>
          <a href="#teachers">Teachers</a>
          <a href="#parents">Parents</a>
        </nav>
        <button type="button" class="edu-login" data-login-trigger>Login</button>
      </header>

      <main class="edu-hero" role="main">
        <div class="edu-hero__content">
          <p class="edu-hero__eyebrow">Free classroom-ready library</p>
          <h1>For every student, every classroom. Real results.</h1>
          <p>
            CoffeeShop Education keeps cover by looking like a calm learning portal while quietly holding your secure
            workspace in the back room. Focus on studies in the open, click Login when it is time for the real session.
          </p>
          <div class="edu-hero__actions">
            <button type="button" class="edu-primary" data-login-trigger>Login</button>
            <button type="button" class="edu-secondary">Explore catalog</button>
          </div>
          <dl class="edu-hero__stats">
            <div>
              <dt>6,200+</dt>
              <dd>Video lessons</dd>
            </div>
            <div>
              <dt>1,400</dt>
              <dd>Teacher resources</dd>
            </div>
            <div>
              <dt>24/7</dt>
              <dd>Study rooms</dd>
            </div>
          </dl>
        </div>
        <div class="edu-hero__card" aria-label="Featured tracks">
          <p class="edu-card__eyebrow">Featured tracks</p>
          <ul>
            <li>
              <strong>STEM Core</strong>
              <span>Guided algebra through physics demos.</span>
            </li>
            <li>
              <strong>Writing Sprint</strong>
              <span>Daily prompts + coach feedback.</span>
            </li>
            <li>
              <strong>Exam Lift</strong>
              <span>Timed drills with auto-scores.</span>
            </li>
          </ul>
        </div>
      </main>

      <section id="courses" class="edu-courses" aria-labelledby="edu-courses-title">
        <div class="edu-section__head">
          <div>
            <p class="edu-eyebrow">Popular courses</p>
            <h2 id="edu-courses-title">Pick a path &mdash; math to arts</h2>
          </div>
          <button type="button" class="edu-ghost">View catalog</button>
        </div>
        <div class="edu-course-grid">
          <article>
            <div class="edu-icon" aria-hidden="true">ðŸ§®</div>
            <h3>Math Foundations</h3>
            <p>Build skills from fractions through algebra with interactive checks.</p>
            <span>Grades 3-10</span>
          </article>
          <article>
            <div class="edu-icon" aria-hidden="true">ðŸ§ª</div>
            <h3>Science Studio</h3>
            <p>Explore biology, chemistry, and physics with lab simulations.</p>
            <span>Grades 5-12</span>
          </article>
          <article>
            <div class="edu-icon" aria-hidden="true">ðŸŽ¨</div>
            <h3>Arts &amp; Humanities</h3>
            <p>Guided art history walks and creative writing mini-labs.</p>
            <span>All ages</span>
          </article>
        </div>
      </section>

      <section id="cohorts" class="edu-cohorts">
        <div>
          <p class="edu-eyebrow">Live cohorts</p>
          <h2>Study together in private rooms</h2>
          <p>
            Small group cohorts unlock twice a week. Each one comes with private chat, resource boards, and optional
            guardian summaries. Everything looks like a normal homework tracker.
          </p>
        </div>
        <ul>
          <li>
            <strong>Pre-Calc Sunrise</strong>
            <span>Mon/Wed &middot; 7:00am</span>
          </li>
          <li>
            <strong>Global Studies Lab</strong>
            <span>Tue/Thu &middot; 4:30pm</span>
          </li>
          <li>
            <strong>Creative Coding Arcade</strong>
            <span>Fri &middot; 6:00pm</span>
          </li>
        </ul>
      </section>

      <section id="teachers" class="edu-trust">
        <article>
          <h3>Teachers</h3>
          <p>Deploy ready-to-print lesson plans, auto-graded checks, and subtle attendance trackers.</p>
        </article>
        <article>
          <h3>Learners</h3>
          <p>Earn progress badges quietly. Switch devices without losing place using your study ID.</p>
        </article>
        <article>
          <h3>Families</h3>
          <p>Opt-in summaries arrive weekly. Nothing hints at the CoffeeShop workspace unless you press Login.</p>
        </article>
      </section>

      <footer class="edu-footer" id="parents">
        <div>
          <p class="edu-eyebrow">Secure entry</p>
          <h2>Only verified students continue past this door</h2>
          <p>
            Login opens the protected CoffeeShop workstation. First-time visitors will be asked for the access code; if
            you have already entered it, a single click takes you right back in.
          </p>
        </div>
        <div class="edu-footer__cta">
          <p id="edu-login-hint">Students tap Login to continue their session.</p>
          <button type="button" class="edu-primary" data-login-trigger aria-label="Open login access">Login</button>
        </div>
      </footer>
    </div>

    <div id="app-shell">
      <button id="barista-toggle" class="barista-toggle" type="button" aria-expanded="false">
        Meet The Barista
      </button>
      <section id="barista-panel" class="barista-panel" aria-live="polite" hidden>
        <header class="barista-panel__header">
          <div>
            <p class="barista-panel__eyebrow">Coffee Shop AI</p>
            <h2>The Barista</h2>
          </div>
          <button id="barista-close" class="barista-panel__close" type="button" aria-label="Close Barista chat">
            &times;
          </button>
        </header>
        <div id="barista-messages" class="barista-messages" aria-live="polite">
          Tap out your first order to start chatting.
        </div>
        <form id="barista-form" class="barista-form" autocomplete="off">
          <label for="barista-input" class="sr-only">Message The Barista</label>
          <input id="barista-input" type="text" placeholder="Ask The Barista anythingâ€¦" maxlength="320" />
          <button type="submit">Send</button>
        </form>
        <p id="barista-status" class="barista-status" aria-live="polite"></p>
      </section>
      <div id="broadcast-banner" class="broadcast-banner" role="status" aria-live="assertive" aria-hidden="true">
        <div class="broadcast-banner__inner">
          <p id="broadcast-banner-text"></p>
        </div>
      </div>
      <header class="hero">
        <div class="hero__content">
        <img src="assets/logo.svg" class="hero__logo" alt="Coffee Shop proxy logo" width="140" height="140" />
        <p class="hero__eyebrow">Quiet proxy lounge</p>
        <h1 class="hero__title">Coffee Shop</h1>
        <p class="hero__lead">
          A hazel-toned hideout that pours every request through our Safezone roastery. Slow-sip comfort, fast escapes.
        </p>

        <form id="portal-form" class="portal" autocomplete="off">
          <label for="destination" class="sr-only">Enter a URL or search query</label>
          <input
            id="destination"
            name="destination"
            type="text"
            inputmode="url"
            placeholder="Order a site or search anything..."
            required
          />
          <button type="submit">Pour a connection</button>
        </form>

        <p id="portal-status" class="portal__status" role="status" aria-live="polite"></p>

        <div class="comfort">
          <span>Comfort toggles:</span>
          <label class="toggle">
            <input type="checkbox" id="focus-mode" />
            <span>Focus mode</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="panic-shortcut" checked />
            <span>Double-press panic</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="history-off" checked />
            <span>History off</span>
          </label>
        </div>

        <div class="cloak" aria-label="Tab cloaking & panic options">
          <span>Tab cloak:</span>
          <label class="toggle">
            <input type="checkbox" id="tab-cloak" />
            <span>Disguise as homework doc</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="auto-blank" />
            <span>Auto-launch about:blank</span>
          </label>
          <input type="text" id="cloak-title" placeholder="Custom tab title (optional)" />
          <button type="button" id="cloak-blank">Launch about:blank session</button>
        </div>

        <div class="panic-settings">
          <label for="panic-key">Panic key:</label>
          <select id="panic-key">
            <option value="Escape">Escape</option>
            <option value="F1">F1</option>
            <option value="F2">F2</option>
            <option value="Backquote">` (backtick)</option>
            <option value="Backspace">Backspace</option>
          </select>
          <small>Press twice to trigger.</small>
        </div>
      </div>

      </div>

        <div class="relay-panel" aria-live="polite">
        <p class="relay-panel__label">Active engine</p>
        <p id="active-service-name" class="relay-panel__name">Coffee Shop Balanced</p>
        <p id="active-service-desc" class="relay-panel__desc">
          House blend rewrite that balances warmth, compatibility, and stealth.
        </p>
        <div class="relay-panel__choices" role="group" aria-label="Relay choice">
          <button class="relay-chip is-active" data-service="coffeeshop">Balanced</button>
          <button class="relay-chip" data-service="coffeeshop_headless">Espresso (headless)</button>
          <button class="relay-chip" data-service="coffeeshop_lite">Iced (lite)</button>
        </div>

        <div class="relay-panel__status">
          <p class="relay-panel__status-title">Brew status</p>
          <dl>
            <div>
              <dt>Roast</dt>
              <dd>Auto-select</dd>
            </div>
            <div>
              <dt>Trace logging</dt>
              <dd>Disabled</dd>
            </div>
            <div>
              <dt>Comfort rating</dt>
              <dd>Fireside plush</dd>
            </div>
          </dl>
        </div>
        <div class="transport-controls" aria-label="Transport controls">
          <div class="transport-controls__summary">
            <p class="transport-controls__label">Transport</p>
            <p id="transport-state-label" class="transport-controls__state">Coffee line: unknown</p>
          </div>
          <div class="relay-panel__choices transport-controls__choices" role="group" aria-label="Transport preference">
            <button class="transport-chip relay-chip is-active" data-transport="auto">Auto</button>
            <button class="transport-chip relay-chip" data-transport="safezone">Safezone</button>
            <button class="transport-chip relay-chip" data-transport="direct">Direct</button>
          </div>
          <small id="transport-metrics-hint" class="transport-controls__hint">
            Balancing Safezone reliability and straight-through latency automatically.
          </small>
        </div>

        <div class="userscripts" aria-label="User scripts">
          <div class="userscripts__header">
            <p class="userscripts__label">User scripts</p>
            <small id="userscript-status">Stored locally</small>
          </div>
          <textarea
            id="userscript-input"
            placeholder="Paste a script to inject after every page loads..."
          ></textarea>
          <div class="userscripts__actions">
            <button type="button" id="userscript-save">Save script</button>
            <button type="button" id="userscript-clear">Clear</button>
          </div>
        </div>
      </div>
      </header>

      <button id="dev-launcher" class="dev-launcher" aria-label="Open developer console" title="Open developer console">
        <img src="assets/logo.svg" alt="Developer console launcher" />
      </button>

      <section class="workspace" aria-label="Coffee Shop Safezone workspace">
        <div class="workspace__chrome">
          <p id="workspace-status">Awaiting secure session.</p>
          <button type="button" id="workspace-reset">Reset view</button>
          <button type="button" id="fullscreen-toggle">Enter fullscreen</button>
        </div>
        <div class="workspace__frame">
          <div id="frame-placeholder" class="workspace__placeholder">
            Your secure session will render here once you launch a destination.
          </div>
          <iframe
            id="proxy-frame"
            title="Coffee Shop Safezone session"
            sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
            loading="lazy"
          ></iframe>
        </div>
      </section>

      <section class="diagnostics" aria-label="Coffee Shop diagnostics">
        <header class="diagnostics__header">
          <div>
            <p class="diagnostics__eyebrow">Relay telemetry</p>
            <h2>Live diagnostics</h2>
          </div>
          <div class="diagnostics__actions">
            <button type="button" id="diag-refresh">Refresh</button>
            <button type="button" id="diag-ping">Latency test</button>
          </div>
        </header>
        <div class="diagnostics__grid">
          <article>
            <h3>Safezone</h3>
            <p id="diag-safezone" class="diagnostics__value">Unknown</p>
            <small>Transport channel health</small>
          </article>
          <article>
            <h3>Cache</h3>
            <p id="diag-cache" class="diagnostics__value">â€“</p>
            <small>Hit rate Â· size</small>
          </article>
          <article>
            <h3>Requests</h3>
            <p id="diag-requests" class="diagnostics__value">â€“</p>
            <small>Totals &amp; avg latency</small>
          </article>
          <article>
            <h3>Headless / renderer</h3>
            <p id="diag-headless" class="diagnostics__value">â€“</p>
            <small>Headless concurrency</small>
          </article>
          <article>
            <h3>Last latency test</h3>
            <p id="diag-latency" class="diagnostics__value">â€“</p>
            <small>Health endpoint ping</small>
          </article>
          <article>
            <h3>Last request</h3>
            <p id="diag-request-id" class="diagnostics__value">â€“</p>
            <small>Renderer &amp; destination</small>
          </article>
        </div>
        <pre id="diag-log" class="diagnostics__log" aria-live="polite">Waiting for diagnosticsâ€¦</pre>
      </section>

      <main>
        <section id="dev-dashboard" class="dev-dashboard" hidden>
          <header>
            <p class="dev-dashboard__eyebrow">Developer mode</p>
            <h2>Active sessions</h2>
            <p class="dev-dashboard__welcome">Welcome to the Barista Station, James. What would you like to do here?</p>
            <p class="dev-dashboard__url">Current URL cache: <span id="dev-current-cache">n/a</span></p>
          </header>
          <div class="dev-dashboard__grid">
            <article>
              <h3>Cache entries</h3>
              <div class="dev-dashboard__list" id="dev-cache-list">No cache entries yet.</div>
            </article>
            <article>
              <h3>Registered users</h3>
              <div class="dev-dashboard__list dev-user-list" id="dev-user-list">No users yet.</div>
            </article>
            <article>
              <h3>Banned users</h3>
              <div class="dev-dashboard__list dev-banned-list" id="dev-banned-list">No users banned.</div>
            </article>
            <article>
              <h3>Recent activity</h3>
              <div class="dev-dashboard__list" id="dev-log-list">No activity logged.</div>
            </article>
            <article>
              <h3>Banned devices</h3>
              <div class="dev-dashboard__list" id="dev-device-list">No devices banned.</div>
            </article>
            <article>
              <h3>Broadcast</h3>
              <form id="dev-broadcast-form" class="dev-broadcast">
                <label class="sr-only" for="dev-broadcast-input">Broadcast message</label>
                <textarea id="dev-broadcast-input" placeholder="Type system messageâ€¦" rows="3"></textarea>
                <button type="submit">Send broadcast</button>
                <p id="dev-broadcast-status" class="dev-broadcast__status"></p>
              </form>
            </article>
            <article>
              <h3>Live chat feed</h3>
              <div class="dev-dashboard__list dev-chat-log" id="dev-chat-log">No chat yet.</div>
            </article>
          </div>
        </section>

        <section class="features">
          <article>
            <h2>No account trail</h2>
            <p>Browser-grade privacy without the sign-in baggage. Everything is ephemeral unless you say otherwise.</p>
          </article>
          <article>
            <h2>Single-origin routing</h2>
            <p>Every sip runs through one carefully tuned Safezone roast so you always know what stack shields you.</p>
          </article>
          <article>
            <h2>Warm ambience</h2>
            <p>Caramel gradients, quiet toggles, and little rituals keep the experience calm even when traffic spikes.</p>
          </article>
        </section>

        <section class="mission" id="mission">
          <p>
            The goal of Coffee Shop is to finally end annoying internet censorships, especially at school. Solo made by
            @1d3nt1ty. Visit the TN Discord at <a href="https://discord.gg/unblock" target="_blank" rel="noreferrer">discord.gg/unblock</a>.
          </p>
        </section>

        <section class="how-it-works">
          <h2>How Coffee Shop works</h2>
          <ol>
            <li>Paste a URL or type anything to search privately.</li>
            <li>Coffee Shop launches a cloaked tab through our native Safezone rewrite backend.</li>
          </ol>
          <p class="subtle">Need to plug in a different deployment? Update the relay configuration inside <code>public/app.js</code>.</p>
        </section>

        <section class="credits" aria-label="Project credits">
          <p>James / @1d3nt1ty &mdash; Solo project, main coder and designer.</p>
        </section>
      </main>
      <button class="chat-toggle" id="chat-toggle" type="button" aria-expanded="false">Open chat</button>
      <section class="chat-bar" aria-label="Coffee Shop global chat">
        <div class="chat-bar__messages" id="chat-messages" aria-live="polite">Waiting for chatâ€¦</div>
        <form id="chat-form" class="chat-bar__form" autocomplete="off">
          <label for="chat-input" class="sr-only">Chat message</label>
          <input id="chat-input" type="text" placeholder="Say something to the Coffee Shopâ€¦" maxlength="280" />
          <button type="submit">Send</button>
        </form>
      </section>
    </div>

    <div class="lockout-overlay is-hidden" id="lockout-overlay" aria-hidden="true">
      <div class="lockout-overlay__scan" aria-hidden="true"></div>
      <div class="lockout-overlay__inner">
        <div class="lockout-overlay__message" role="alert" aria-live="assertive">
          <p class="lockout-overlay__text" id="lockout-message"></p>
        </div>
      </div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
<!-- __USERSCRIPT_MARKER__ -->
