<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="AstraCore Institute of Nuclear Sciences - Advanced Education Portal."
    />
    <meta name="theme-color" content="#0a1f0a" />
    <title>AstraCore Institute of Nuclear Sciences</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="assets/logo.svg" type="image/svg+xml" />
  </head>
  <body class="auth-locked">
    <!-- Fake Education Site (Visible by default) -->
    <div id="fake-site">
      <header class="fake-header">
        <div class="fake-logo">
          <img src="assets/logo.svg" alt="AstraCore Logo" width="40" height="40" />
          <span>AstraCore Institute</span>
        </div>
        <nav class="fake-nav">
          <a href="#">Programs</a>
          <a href="#">Research</a>
          <a href="#">Admissions</a>
          <a href="#">About Us</a>
        </nav>
        <button id="login-trigger" class="fake-login-btn">Login</button>
      </header>
      
      <main class="fake-main">
        <section class="fake-hero">
          <h1>Advancing the Future of Nuclear Energy</h1>
          <p>Join the next generation of scientists and engineers dedicated to safe, sustainable, and powerful energy solutions.</p>
          <button class="fake-cta">Explore Programs</button>
        </section>
        
        <section class="fake-features">
          <div class="fake-feature">
            <h3>Reactor Physics</h3>
            <p>Master the fundamental principles of neutron transport and reactor kinetics.</p>
          </div>
          <div class="fake-feature">
            <h3>Radiation Safety</h3>
            <p>Learn industry-standard protocols for shielding and environmental protection.</p>
          </div>
          <div class="fake-feature">
            <h3>Fusion Technology</h3>
            <p>Pioneer the limitless potential of magnetic confinement fusion.</p>
          </div>
        </section>
      </main>
      
      <footer class="fake-footer">
        <p>&copy; 2025 AstraCore Institute of Nuclear Sciences. All rights reserved.</p>
      </footer>
    </div>

    <!-- Auth Overlays (Hidden by default, shown on login click) -->
    <div class="auth-overlay is-hidden" id="auth-overlay" role="dialog" aria-modal="true" aria-labelledby="auth-title">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Institute Access</p>
        <h1 id="auth-title">Authorized Personnel Only</h1>
        <p class="auth-card__lead">Enter your security clearance code to proceed.</p>
        <form id="auth-form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="auth-code" class="sr-only">Access code</label>
          <input
            id="auth-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter clearance code"
            required
          />
          <button type="submit">Verify Clearance</button>
          <p id="auth-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="username-overlay" role="dialog" aria-modal="true">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Researcher ID</p>
        <h1>Identify Yourself</h1>
        <p class="auth-card__lead">Enter your registered researcher handle.</p>
        <form id="username-form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="username-input" class="sr-only">Username</label>
          <input id="username-input" type="text" autocomplete="off" placeholder="Enter handle" required />
          <button type="submit">Register Session</button>
          <p id="username-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="bridge-overlay">
      <div class="auth-card">
        <p class="auth-card__eyebrow">System Admin</p>
        <h1>Identity Verification</h1>
        <p>Enter Level 2 Administrative Code.</p>
        <form id="bridge-form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="bridge-code" class="sr-only">Stage-two code</label>
          <input
            id="bridge-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter admin code"
            required
          />
          <button type="submit">Verify</button>
          <p id="bridge-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div class="auth-overlay is-hidden" id="dev-overlay">
      <div class="auth-card">
        <p class="auth-card__eyebrow">Core Control</p>
        <h1>Developer Console</h1>
        <p>Enter root access credentials.</p>
        <form id="dev-form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="dev-code" class="sr-only">Developer access code</label>
          <input
            id="dev-code"
            type="password"
            inputmode="text"
            autocomplete="off"
            placeholder="Enter root code"
            required
          />
          <button type="submit">Access Core</button>
          <p id="dev-error" class="auth-error" role="alert" aria-live="assertive"></p>
        </form>
      </div>
    </div>

    <div id="app-shell" style="display: none;">
      <button id="scientist-toggle" class="scientist-toggle" type="button" aria-expanded="false">
        Consult The Scientist
      </button>
      <section id="scientist-panel" class="scientist-panel" aria-live="polite" hidden>
        <header class="scientist-panel__header">
          <div>
            <p class="scientist-panel__eyebrow">Lab Assistant AI</p>
            <h2>The Scientist</h2>
          </div>
          <button id="scientist-close" class="scientist-panel__close" type="button" aria-label="Close chat">
            &times;
          </button>
        </header>
        <div id="scientist-messages" class="scientist-messages" aria-live="polite">
          Initiating research protocol. How can I assist your studies?
        </div>
        <form id="scientist-form" class="scientist-form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="scientist-input" class="sr-only">Message The Scientist</label>
          <input id="scientist-input" type="text" placeholder="Ask about nuclear physics..." maxlength="320" />
          <button type="submit">Query</button>
        </form>
        <p id="scientist-status" class="scientist-status" aria-live="polite"></p>
      </section>
      <div id="broadcast-banner" class="broadcast-banner" role="status" aria-live="assertive" aria-hidden="true">
        <div class="broadcast-banner__inner">
          <p id="broadcast-banner-text"></p>
        </div>
      </div>
      <header class="hero">
        <div class="hero__content">
        <img src="assets/logo.svg" class="hero__logo" alt="AstraCore logo" width="140" height="140" />
        <p class="hero__eyebrow">Secure Research Terminal</p>
        <h1 class="hero__title">AstraCore</h1>
        <p class="hero__lead">
          Advanced nuclear research proxy. Routing traffic through secure containment fields.
        </p>

        <form id="portal-form" class="portal" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="destination" class="sr-only">Enter a URL or search query</label>
          <input
            id="destination"
            name="destination"
            type="text"
            inputmode="url"
            placeholder="Access external database or URL..."
            required
          />
          <button type="submit">Establish Link</button>
        </form>

        <p id="portal-status" class="portal__status" role="status" aria-live="polite"></p>

        <div class="comfort">
          <span>Lab Controls:</span>
          <label class="toggle">
            <input type="checkbox" id="focus-mode" />
            <span>Focus Mode</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="panic-shortcut" checked />
            <span>Emergency Scram (Double-tap)</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="history-off" checked />
            <span>No Logs</span>
          </label>
        </div>

        <div class="cloak" aria-label="Tab cloaking & panic options">
          <span>Camouflage:</span>
          <label class="toggle">
            <input type="checkbox" id="tab-cloak" />
            <span>Disguise as Research Paper</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="auto-blank" />
            <span>Auto-launch about:blank</span>
          </label>
          <input type="text" id="cloak-title" placeholder="Custom title (optional)" />
          <button type="button" id="cloak-blank">Launch Blank Session</button>
        </div>

        <div class="panic-settings">
          <label for="panic-key">Scram Key:</label>
          <select id="panic-key">
            <option value="Escape">Escape</option>
            <option value="F1">F1</option>
            <option value="F2">F2</option>
            <option value="Backquote">` (backtick)</option>
            <option value="Backspace">Backspace</option>
          </select>
          <small>Press twice to trigger emergency shutdown.</small>
        </div>
      </div>

      </div>

        <div class="relay-panel" aria-live="polite">
        <p class="relay-panel__label">Active Core</p>
        <p id="active-service-name" class="relay-panel__name">AstraCore Balanced</p>
        <p id="active-service-desc" class="relay-panel__desc">
          Standard containment field for general research.
        </p>
        <div class="relay-panel__choices" role="group" aria-label="Relay choice">
          <button class="relay-chip is-active" data-service="coffeeshop">Balanced</button>
          <button class="relay-chip" data-service="coffeeshop_headless">Heavy Water (Headless)</button>
          <button class="relay-chip" data-service="coffeeshop_lite">Light Water (Lite)</button>
        </div>

        <div class="relay-panel__status">
          <p class="relay-panel__status-title">Reactor Status</p>
          <dl>
            <div>
              <dt>Core Temp</dt>
              <dd>Stable</dd>
            </div>
            <div>
              <dt>Radiation Levels</dt>
              <dd>Nominal</dd>
            </div>
            <div>
              <dt>Containment</dt>
              <dd>Active</dd>
            </div>
          </dl>
        </div>
        <div class="transport-controls" aria-label="Transport controls">
          <div class="transport-controls__summary">
            <p class="transport-controls__label">Transport</p>
            <p id="transport-state-label" class="transport-controls__state">Link: Unknown</p>
          </div>
          <div class="relay-panel__choices transport-controls__choices" role="group" aria-label="Transport preference">
            <button class="transport-chip relay-chip is-active" data-transport="auto">Auto</button>
            <button class="transport-chip relay-chip" data-transport="safezone">Secure</button>
            <button class="transport-chip relay-chip" data-transport="direct">Direct</button>
          </div>
          <small id="transport-metrics-hint" class="transport-controls__hint">
            Optimizing for secure data transmission.
          </small>
        </div>

        <div class="userscripts" aria-label="User scripts">
          <div class="userscripts__header">
            <p class="userscripts__label">Inject Code</p>
            <small id="userscript-status">Stored locally</small>
          </div>
          <textarea
            id="userscript-input"
            placeholder="Paste script to inject..."
          ></textarea>
          <div class="userscripts__actions">
            <button type="button" id="userscript-save">Save</button>
            <button type="button" id="userscript-clear">Clear</button>
          </div>
        </div>
      </div>
      </header>

      <button id="dev-launcher" class="dev-launcher" aria-label="Open developer console" title="Open developer console">
        <img src="assets/logo.svg" alt="Developer console launcher" />
      </button>

      <section class="workspace" aria-label="Secure workspace">
        <div class="workspace__chrome">
          <p id="workspace-status">Awaiting secure link.</p>
          <button type="button" id="workspace-reset">Reset View</button>
          <button type="button" id="fullscreen-toggle">Fullscreen</button>
        </div>
        <div class="workspace__frame">
          <div id="frame-placeholder" class="workspace__placeholder">
            Secure session will render here.
          </div>
          <iframe
            id="proxy-frame"
            title="Secure session"
            sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
            loading="lazy"
          ></iframe>
        </div>
      </section>

      <section class="diagnostics" aria-label="Diagnostics">
        <header class="diagnostics__header">
          <div>
            <p class="diagnostics__eyebrow">System Telemetry</p>
            <h2>Live Diagnostics</h2>
          </div>
          <div class="diagnostics__actions">
            <button type="button" id="diag-refresh">Refresh</button>
            <button type="button" id="diag-ping">Ping Test</button>
          </div>
        </header>
        <div class="diagnostics__grid">
          <article>
            <h3>Secure Link</h3>
            <p id="diag-safezone" class="diagnostics__value">Unknown</p>
            <small>Channel Health</small>
          </article>
          <article>
            <h3>Cache</h3>
            <p id="diag-cache" class="diagnostics__value">–</p>
            <small>Hit rate · size</small>
          </article>
          <article>
            <h3>Requests</h3>
            <p id="diag-requests" class="diagnostics__value">–</p>
            <small>Total &amp; Latency</small>
          </article>
          <article>
            <h3>Headless</h3>
            <p id="diag-headless" class="diagnostics__value">–</p>
            <small>Concurrency</small>
          </article>
          <article>
            <h3>Latency</h3>
            <p id="diag-latency" class="diagnostics__value">–</p>
            <small>Ping</small>
          </article>
          <article>
            <h3>Last Request</h3>
            <p id="diag-request-id" class="diagnostics__value">–</p>
            <small>ID</small>
          </article>
        </div>
        <pre id="diag-log" class="diagnostics__log" aria-live="polite">Waiting for telemetry...</pre>
      </section>

      <main>
        <section id="dev-dashboard" class="dev-dashboard" hidden>
          <header>
            <p class="dev-dashboard__eyebrow">Admin Mode</p>
            <h2>Active Sessions</h2>
            <p class="dev-dashboard__welcome">Welcome to the Core, Admin. Systems are nominal.</p>
            <p class="dev-dashboard__url">Current Cache: <span id="dev-current-cache">n/a</span></p>
          </header>
          <div class="dev-dashboard__grid">
            <article>
              <h3>Cache Entries</h3>
              <div class="dev-dashboard__list" id="dev-cache-list">No entries.</div>
            </article>
            <article>
              <h3>Registered Researchers</h3>
              <div class="dev-dashboard__list dev-user-list" id="dev-user-list">No users.</div>
            </article>
            <article>
              <h3>Banned Subjects</h3>
              <div class="dev-dashboard__list dev-banned-list" id="dev-banned-list">No bans.</div>
            </article>
            <article>
              <h3>Activity Log</h3>
              <div class="dev-dashboard__list" id="dev-log-list">No activity.</div>
            </article>
            <article>
              <h3>Banned Devices</h3>
              <div class="dev-dashboard__list" id="dev-device-list">No devices.</div>
            </article>
            <article>
              <h3>Broadcast</h3>
              <form id="dev-broadcast-form" class="dev-broadcast" onsubmit="event.preventDefault();">
                <label class="sr-only" for="dev-broadcast-input">Broadcast message</label>
                <textarea id="dev-broadcast-input" placeholder="System message..." rows="3"></textarea>
                <button type="submit">Send</button>
                <p id="dev-broadcast-status" class="dev-broadcast__status"></p>
              </form>
            </article>
            <article>
              <h3>Lab Chat</h3>
              <div class="dev-dashboard__list dev-chat-log" id="dev-chat-log">No chat.</div>
            </article>
          </div>
        </section>

        <section class="features">
          <article>
            <h2>Zero Trace</h2>
            <p>Research data is ephemeral. No logs are kept unless explicitly requested.</p>
          </article>
          <article>
            <h2>Secure Routing</h2>
            <p>All traffic is routed through our encrypted containment field.</p>
          </article>
          <article>
            <h2>Calm Environment</h2>
            <p>Designed for focus and efficiency in high-stress academic environments.</p>
          </article>
        </section>

        <section class="mission" id="mission">
          <p>
            AstraCore Institute is dedicated to the free exchange of information for educational purposes.
          </p>
        </section>

        <section class="how-it-works">
          <h2>System Operations</h2>
          <ol>
            <li>Enter a target URL to begin research.</li>
            <li>The system establishes a secure link via the containment field.</li>
          </ol>
          <p class="subtle">Configuration can be adjusted in <code>public/app.js</code>.</p>
        </section>

        <section class="credits" aria-label="Project credits">
          <p>AstraCore Systems &mdash; Secure Educational Access.</p>
        </section>
      </main>
      <button class="chat-toggle" id="chat-toggle" type="button" aria-expanded="false">Open Lab Chat</button>
      <section class="chat-bar" aria-label="Global chat">
        <div class="chat-bar__messages" id="chat-messages" aria-live="polite">Waiting for comms...</div>
        <form id="chat-form" class="chat-bar__form" autocomplete="off" onsubmit="event.preventDefault();">
          <label for="chat-input" class="sr-only">Chat message</label>
          <input id="chat-input" type="text" placeholder="Broadcast to lab..." maxlength="280" />
          <button type="submit">Transmit</button>
        </form>
      </section>
    </div>

    <div class="lockout-overlay is-hidden" id="lockout-overlay" aria-hidden="true">
      <div class="lockout-overlay__scan" aria-hidden="true"></div>
      <div class="lockout-overlay__inner">
        <div class="lockout-overlay__message" role="alert" aria-live="assertive">
          <p class="lockout-overlay__text" id="lockout-message"></p>
        </div>
      </div>
    </div>

    <button id="proxy-manager-toggle" class="proxy-manager-toggle" type="button">
        Node Manager
      </button>

      <section id="proxy-manager-panel" class="proxy-manager-panel" aria-hidden="true">
        <header class="proxy-manager-panel__header">
          <h2>Node Manager</h2>
          <button id="proxy-manager-close" class="proxy-manager-panel__close" type="button" aria-label="Close Manager">
            &times;
          </button>
        </header>
        
        <div class="proxy-manager-content">
          <p class="subtle">Select a relay node to route your traffic.</p>
          
          <div class="proxy-node-list" role="radiogroup" aria-label="Proxy Nodes">
            <div class="proxy-node is-active" data-node="us-east-1" role="radio" aria-checked="true" tabindex="0">
              <div class="proxy-node__info">
                <h3>US East (Virginia)</h3>
                <p>Low latency, standard routing.</p>
              </div>
              <span class="proxy-node__status">Online</span>
            </div>
            
            <div class="proxy-node" data-node="eu-west-1" role="radio" aria-checked="false" tabindex="0">
              <div class="proxy-node__info">
                <h3>EU West (Ireland)</h3>
                <p>Alternative route.</p>
              </div>
              <span class="proxy-node__status">Online</span>
            </div>
            
            <div class="proxy-node" data-node="ap-northeast-1" role="radio" aria-checked="false" tabindex="0">
              <div class="proxy-node__info">
                <h3>Asia Pacific (Tokyo)</h3>
                <p>Regional bypass.</p>
              </div>
              <span class="proxy-node__status">Online</span>
            </div>

             <div class="proxy-node" data-node="stealth-v2" role="radio" aria-checked="false" tabindex="0">
              <div class="proxy-node__info">
                <h3>Stealth V2 (Experimental)</h3>
                <p>Obfuscated headers.</p>
              </div>
              <span class="proxy-node__status">Beta</span>
            </div>
          </div>

          <div class="comfort" style="margin-top: 2rem;">
             <h3>Counter-Measures</h3>
             <label class="toggle">
                <input type="checkbox" id="stealth-headers" checked>
                <span>Strip Tracking Headers</span>
             </label>
             <label class="toggle">
                <input type="checkbox" id="rotate-user-agent">
                <span>Rotate User-Agent</span>
             </label>
          </div>
        </div>
      </section>

    <script type="module" src="app.js"></script>
  </body>
</html>
<!-- __USERSCRIPT_MARKER__ -->
